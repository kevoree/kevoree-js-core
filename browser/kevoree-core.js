!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("KevoreeLibrary")):"function"==typeof define&&define.amd?define(["KevoreeLibrary"],t):"object"==typeof exports?exports.KevoreeCore=t(require("KevoreeLibrary")):e.KevoreeCore=t(e.KevoreeLibrary)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t){"use strict";function r(e,t,n){if(!e||!t||!n)throw new Error("KevoreeCore constructor needs a KevScript engine, modulesPath and a KevoreeLogger");this.log=n,this.kevs=e,this.stopping=!1,this.currentModel=null,this.deployModel=null,this.nodeName=null,this.nodeInstance=null,this.modulesPath=t,this.bootstrapper=null,this.firstBoot=!0,this.scriptQueue=[],this.emitter=new u}var o=n(2),i=n(3),s=n(43),u=n(46).EventEmitter,c=/^[\w]+$/;s.inherits(r,u),r.prototype.start=function(e){if(e&&0!==e.length||(e="node0"),!e.match(c))throw new Error("Platform node name must match this regex "+c.toString());this.nodeName=e;var t=new o.factory.DefaultKevoreeFactory;this.currentModel=t.createContainerRoot(),t.root(this.currentModel);var n=t.createContainerNode();n.name=this.nodeName,n.started=!1,this.currentModel.addNodes(n);var r=setInterval(function(){},1e11);this.emitter.on("stopped",function(){clearInterval(r),this.emit("stopped")}.bind(this)),this.log.info(this.toString(),"Platform node name: "+e)},r.prototype.stop=function(){var e=new o.factory.DefaultKevoreeFactory,t=e.createModelCloner(),n=t.clone(this.currentModel,!1),r=n.findNodesByID(this.nodeName);r.started=!1;for(var i=r.hosts.iterator();i.hasNext();)i.next().delete();for(var s=r.groups.iterator();s.hasNext();)s.next().delete();for(var u=n.mBindings.iterator();u.hasNext();){var c=u.next();c.port.eContainer()&&c.port.eContainer().eContainer()&&c.port.eContainer().eContainer().name===r.name&&c.hub&&c.hub.delete()}for(var a=r.components.iterator();a.hasNext();)a.next().delete();this.stopping=!0,this.deploy(n,function(){null===this.nodeInstance?(this.log.info(this.toString(),"Platform stopped before bootstrapped"),this.emitter.emit("stopped")):(this.log.info(this.toString(),"Platform stopped: "+this.nodeInstance.getName()),this.emitter.emit("stopped"))}.bind(this))},r.prototype.deploy=function(e,n){if(n=n||function(){},this.deployModel)this.log.warn(this.toString(),"New deploy process requested: aborted because another one is in process (retry later?)"),n(new Error("New deploy process requested: aborted because another one is in process (retry later?)"));else if(this.emit("deploying",e),e&&!e.findNodesByID(this.nodeName))n(new Error("Deploy model failure: unable to find "+this.nodeName+" in given model"));else{this.log.debug(this.toString(),"Deploy process started...");var r=(new Date).getTime();if(e){var s=this;this.checkBootstrapNode(e,function(u){if(u)s.emit("error",u),n(u);else if(s.nodeInstance){var c;try{var a=new o.factory.DefaultKevoreeFactory,l=a.createModelCloner();console.log(JSON.stringify(JSON.parse(a.createJSONSerializer().serialize(e)),null,2)),s.deployModel=l.clone(e,!0),s.deployModel.setRecursiveReadOnly();var f=a.createModelCompare().diff(s.currentModel,s.deployModel),p=s.nodeInstance.processTraces(f,s.deployModel),d=[],h=function(e,t){d.unshift(e),new Promise(function(t,n){e.execute(function(e){e?n(e):t()})}).then(t).catch(function(n){s.stopping?(s.log.error(e.toString(),"Skip failed adaptation: "+n.message),t()):t(n)})},y=function(e,t){new Promise(function(t,n){e.undo(function(e){e?n(e):t()})}).then(t).catch(t)};i(p,h,function(o){o?(o.message="Something went wrong while processing adaptations.\n"+o.message,s.log.error(s.toString(),o.stack),s.firstBoot?(s.log.warn(s.toString(),"Shutting down Kevoree because first deployment failed..."),s.deployModel=null,s.stop(),t.nextTick(function(){n(o)})):(s.log.info(s.toString(),"Rollbacking to previous model..."),i(d,y,function(e){e?(e.message="Something went wrong while rollbacking. Process will exit.\n"+e.message,s.log.error(s.toString(),e.stack),s.deployModel=null,s.stop(),n(e)):(s.log.info(s.toString(),"Rollback succeed: "+d.length+" adaptations ("+((new Date).getTime()-r)+"ms)"),s.deployModel=null,s.emit("rollbackSucceed"),n())}))):(s.currentModel=e,s.deployModel=null,s.log.info(s.toString(),(s.stopping?"Stop model":"Model")+" deployed successfully: "+p.length+" adaptations ("+((new Date).getTime()-r)+"ms)"),s.processScriptQueue(),s.emit("deployed"),s.firstBoot=!1,n())})}catch(e){c=e,s.log.error(s.toString(),c.stack)}n(c)}else n(new Error("There is no instance to bootstrap on"))})}else n(new Error("Model is not defined or null. Deploy aborted."))}},r.prototype.submitScript=function(e,t){"function"!=typeof t&&(t=function(e){e&&this.log.error(this.toString(),e.message)}.bind(this)),null===this.deployModel?this.kevs.parse(e,this.currentModel,function(e,n){if(e){var r=new Error("KevScript submission failed ("+e.message+")");return void t(r)}var o,i,s;o=function(){this.off("error",i),this.off("adaptationError",s),t()}.bind(this),i=function(e){this.off("deployed",o),this.off("adaptationError",s);var n=new Error("KevScript submission failed ("+e.message+")");t(n)}.bind(this),s=function(e){this.off("error",i),this.off("deployed",o);var n=new Error("KevScript submission failed ("+e.message+")");t(n)}.bind(this),this.once("deployed",o),this.once("error",i),this.once("adaptationError",s),this.deploy(n)}.bind(this)):(this.scriptQueue.push({script:e,callback:t}),this.log.debug(this.toString(),"Script added to queue at position "+this.scriptQueue.length-1))},r.prototype.processScriptQueue=function(){if(this.scriptQueue.length>0){var e=this.scriptQueue[0];this.scriptQueue.splice(0,1),this.log.debug(this.toString(),"Core.processScriptQueue parsing "+e.script),this.kevs.parse(e.script,this.currentModel,function(t,n){if(t){var r=new Error("KevScript submission failed ("+t.message+")");e.callback(r)}else{var o,i,s;o=function(){this.off("error",i),this.off("adaptationError",s),e.callback()}.bind(this),i=function(t){this.off("deployed",o),this.off("adaptationError",s);var n=new Error("KevScript submission failed ("+t.message+")");e.callback(n)}.bind(this),s=function(t){this.off("error",i),this.off("deployed",o);var n=new Error("KevScript submission failed ("+t.message+")");e.callback(n)}.bind(this),this.once("deployed",o),this.once("error",i),this.once("adaptationError",s),this.deploy(n)}}.bind(this))}},r.prototype.checkBootstrapNode=function(e,t){t=t||function(){console.warn("No callback defined for checkBootstrapNode(model, cb) in KevoreeCore")},"undefined"==typeof this.nodeInstance||null===this.nodeInstance?(this.log.debug(this.toString(),"Start '"+this.nodeName+"' bootstrapping..."),this.bootstrapper.bootstrapNodeType(this.nodeName,e,function(n,r){if(n)return void t(n);var i;try{var s=e.findNodesByID(this.nodeName),u=this.currentModel.findNodesByID(this.nodeName);this.nodeInstance=new r(this,s,this.nodeName);var c=new o.factory.DefaultKevoreeFactory;u.dictionary=c.createDictionary().withGenerated_KMF_ID("0"),s.typeDefinition.dictionaryType&&s.typeDefinition.dictionaryType.attributes.array.forEach(function(e){if(!e.fragmentDependant){var t=c.createValue();t.name=e.name,t.value=e.defaultValue,u.dictionary.addValues(t),this.log.debug(this.toString(),"Set default node param: "+t.name+"="+t.value)}}.bind(this))}catch(e){i=e}t(i)}.bind(this))):t()},r.prototype.toString=function(){return"Core"},r.prototype.getBootstrapper=function(){return this.bootstrapper},r.prototype.setBootstrapper=function(e){this.bootstrapper=e},r.prototype.getModulesPath=function(){return this.modulesPath},r.prototype.getCurrentModel=function(){return this.currentModel},r.prototype.getLastModel=function(){return"undefined"!=typeof this.deployModel&&null!==this.deployModel?this.deployModel:this.currentModel},r.prototype.getDeployModel=function(){return this.deployModel},r.prototype.getNodeName=function(){return this.nodeName},r.prototype.getLogger=function(){return this.log},r.prototype.off=function(e,t){this.removeListener(e,t)},e.exports=r}).call(t,n(1))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?h=d.concat(h):v=-1,h.length&&u())}function u(){if(!y){var e=o(s);y=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,y=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function a(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],y=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||y||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=r(o),s=n(42),u=r(s);t.default=(0,u.default)(i.default,1),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){(0,s.default)(t)(e,(0,c.default)(n),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(5),s=r(i),u=n(41),c=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(t,n,r){function o(e,t){if(f-=1,e)a=!0,r(e);else{if(t===h.default||a&&f<=0)return a=!0,r(null);i()}}function i(){for(;f<e&&!a;){var t=u();if(null===t)return a=!0,void(f<=0&&r(null));f+=1,n(t.value,t.key,(0,p.default)(o))}}if(r=(0,c.default)(r||s.default),e<=0||!t)return r(null);var u=(0,l.default)(t),a=!1,f=0;i()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(6),s=r(i),u=n(7),c=r(u),a=n(8),l=r(a),f=n(39),p=r(f),d=n(40),h=r(d);e.exports=t.default},function(e,t){function n(){}e.exports=n},function(e,t){"use strict";function n(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function i(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function s(e){var t=(0,d.default)(e),n=-1,r=t.length;return function(){var o=t[++n];return n<r?{value:e[o],key:o}:null}}function u(e){if((0,a.default)(e))return o(e);var t=(0,f.default)(e);return t?i(t):s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=n(9),a=r(c),l=n(19),f=r(l),p=n(20),d=r(p);e.exports=t.default},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(10),i=n(18);e.exports=r},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==u||t==c||t==s||t==a}var o=n(11),i=n(17),s="[object AsyncFunction]",u="[object Function]",c="[object GeneratorFunction]",a="[object Proxy]";e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?c:u:(e=Object(e),a&&a in e?i(e):s(e))}var o=n(12),i=n(15),s=n(16),u="[object Null]",c="[object Undefined]",a=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(13),o=r.Symbol;e.exports=o},function(e,t,n){var r=n(14),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=s.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=u.call(e);return r&&(t?e[c]=n:delete e[c]),o}var o=n(12),i=Object.prototype,s=i.hasOwnProperty,u=i.toString,c=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n&&e[n]&&e[n]()};var n="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default},function(e,t,n){function r(e){return s(e)?o(e):i(e)}var o=n(21),i=n(35),s=n(9);e.exports=r},function(e,t,n){function r(e,t){var n=s(e),r=!n&&i(e),l=!n&&!r&&u(e),p=!n&&!r&&!l&&a(e),d=n||r||l||p,h=d?o(e.length,String):[],y=h.length;for(var v in e)!t&&!f.call(e,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,y))||h.push(v);return h}var o=n(22),i=n(23),s=n(26),u=n(27),c=n(30),a=n(31),l=Object.prototype,f=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){var r=n(24),o=n(25),i=Object.prototype,s=i.hasOwnProperty,u=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!u.call(e,"callee")};e.exports=c},function(e,t,n){function r(e){return i(e)&&o(e)==s}var o=n(11),i=n(25),s="[object Arguments]";e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(13),o=n(29),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,u=s&&s.exports===i,c=u?r.Buffer:void 0,a=c?c.isBuffer:void 0,l=a||o;e.exports=l}).call(t,n(28)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(32),o=n(33),i=n(34),s=i&&i.isTypedArray,u=s?o(s):r;e.exports=u},function(e,t,n){function r(e){return s(e)&&i(e.length)&&!!T[o(e)]}var o=n(11),i=n(18),s=n(25),u="[object Arguments]",c="[object Array]",a="[object Boolean]",l="[object Date]",f="[object Error]",p="[object Function]",d="[object Map]",h="[object Number]",y="[object Object]",v="[object RegExp]",g="[object Set]",b="[object String]",m="[object WeakMap]",x="[object ArrayBuffer]",w="[object DataView]",j="[object Float32Array]",_="[object Float64Array]",S="[object Int8Array]",M="[object Int16Array]",O="[object Int32Array]",E="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",L="[object Uint32Array]",T={};T[j]=T[_]=T[S]=T[M]=T[O]=T[E]=T[N]=T[k]=T[L]=!0,T[u]=T[c]=T[x]=T[a]=T[w]=T[l]=T[f]=T[p]=T[d]=T[h]=T[y]=T[v]=T[g]=T[b]=T[m]=!1,e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var r=n(14),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,u=s&&r.process,c=function(){try{return u&&u.binding("util")}catch(e){}}();e.exports=c}).call(t,n(28)(e))},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))u.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(36),i=n(37),s=Object.prototype,u=s.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(38),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){"use strict";function n(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},function(e,t){"use strict";function n(e){return function(t,n,r){return e(t,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t){"use strict";function n(e,t){return function(n,r,o){return e(n,t,r,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function s(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&O(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=c(e,o,r)),o}var i=a(e,n);if(i)return i;var s=Object.keys(n),y=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),M(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(O(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(j(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(M(n))return l(n)}var g="",b=!1,x=["{","}"];if(h(n)&&(b=!0,x=["[","]"]),O(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(j(n)&&(g=" "+RegExp.prototype.toString.call(n)),S(n)&&(g=" "+Date.prototype.toUTCString.call(n)),M(n)&&(g=" "+l(n)),0===s.length&&(!b||0==n.length))return x[0]+g+x[1];if(r<0)return j(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var _;return _=b?f(e,n,r,y,s):s.map(function(t){return p(e,n,r,y,t,b)}),e.seen.pop(),d(_,g,x)}function a(e,t){if(w(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o){for(var i=[],s=0,u=t.length;s<u;++s)T(t,String(s))?i.push(p(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))}),i}function p(e,t,n,r,o,i){var s,u,a;if(a=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),T(r,o)||(s="["+o+"]"),u||(e.seen.indexOf(a.value)<0?(u=v(n)?c(e,a.value,null):c(e,a.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(s)){if(i&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function d(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function w(e){return void 0===e}function j(e){return _(e)&&"[object RegExp]"===N(e)}function _(e){return"object"==typeof e&&null!==e}function S(e){return _(e)&&"[object Date]"===N(e)}function M(e){return _(e)&&("[object Error]"===N(e)||e instanceof Error)}function O(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function N(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])s+=v(u)||!_(u)?" "+u:" "+o(u);return s},t.deprecate=function(n,o){function i(){if(!s){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),s=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return i};var A,P={};t.debuglog=function(e){if(w(A)&&(A=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var n=r.pid;P[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else P[e]=function(){};return P[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=y,t.isNull=v,t.isNullOrUndefined=g,t.isNumber=b,t.isString=m,t.isSymbol=x,t.isUndefined=w,t.isRegExp=j,t.isObject=_,t.isDate=S,t.isError=M,t.isFunction=O,t.isPrimitive=E,t.isBuffer=n(44);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",L(),t.format.apply(t,arguments))},t.inherits=n(45),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(1))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),a=n.slice(),o=a.length,c=0;c<o;c++)a[c].apply(this,u);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(u=s;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}}])});